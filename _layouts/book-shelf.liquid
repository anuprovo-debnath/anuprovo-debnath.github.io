---
layout: page
---
{{ content }}

{% if page.collection and page.collection.size > 0 %}
  {% assign collection = site[page.collection] %}
  {% if collection and collection.size > 0 %}
    {% assign grouped_by_author = collection | group_by: 'author' %}
    
    {% for author_group in grouped_by_author %}
      {% unless forloop.first %}
        </ul>
      {% endunless %}
      
      <h1 id="author-{{ author_group.name | slugify }}">
        {% if author_group.name %}
          {{ author_group.name }}
        {% else %}
          Unknown Author
        {% endif %}
      </h1>
      
      <ul>
        {% for item in author_group.items reversed %}
          <figure class="cover">
            {% if item.cover %}
              <img alt="{{ item.title }} cover" src="{{ item.cover | prepend: page.covers | relative_url }}" style="height:200px">
            {% elsif item.olid %}
              <img alt="{{ item.title }} cover" src="https://covers.openlibrary.org/b/olid/{{ item.olid }}-L.jpg?default=false" style="height:200px">
            {% elsif item.isbn %}
              <img alt="{{ item.title }} cover" src="https://covers.openlibrary.org/b/isbn/{{ item.isbn }}-L.jpg?default=false" style="height:200px">
            {% endif %}
            
            {% if item.status %}
              {% assign statuses = 'abandoned,finished,interested,paused,queued,reading,reread' | split: ',' %}
              {% assign status = item.status | downcase | strip %}
              {% if statuses contains status %}
                <figcaption class="{{ status | downcase }}">{{ status | upcase }}</figcaption>
              {% else %}
                <figcaption class="uncategorized">UNCATEGORIZED</figcaption>
              {% endif %}
            {% else %}
              <figcaption class="uncategorized">UNCATEGORIZED</figcaption>
            {% endif %}
          </figure>
        {% endfor %}
      </ul>
    {% endfor %}
  {% endif %}
{% endif %}
